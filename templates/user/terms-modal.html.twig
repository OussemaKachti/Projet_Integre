{# Terms and Conditions Enhanced Modal #}
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content border-0 shadow-lg">
      <div class="modal-header bg-gradient-primary text-white">
        <h5 class="modal-title fw-bold" id="termsModalLabel">
          <i class="fas fa-file-contract me-2"></i>Terms and Conditions
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Quick Navigation -->
      <div class="modal-nav bg-light p-3 border-bottom">
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <div class="terms-toc">
            <span class="fw-bold me-2">Quick Links:</span>
            <div class="btn-group btn-group-sm mt-1 mt-sm-0">
              <button type="button" class="btn btn-outline-secondary" data-section="introduction">Introduction</button>
              <button type="button" class="btn btn-outline-secondary" data-section="accounts">Accounts</button>
              <button type="button" class="btn btn-outline-secondary" data-section="content">Content</button>
              <button type="button" class="btn btn-outline-secondary" data-section="privacy">Privacy</button>
            </div>
          </div>
          <button class="btn btn-sm btn-outline-primary mt-2 mt-sm-0" id="printTerms">
            <i class="fas fa-print me-1"></i> Print
          </button>
        </div>
      </div>
      
      <div class="modal-body">
        <div class="terms-content position-relative">
          <!-- Back to top button -->
          <button class="btn btn-sm btn-primary position-fixed bottom-0 end-0 m-4 rounded-circle d-flex justify-content-center align-items-center" id="backToTop" style="width: 40px; height: 40px; z-index: 1050; opacity: 0.8; display: none;">
            <i class="fas fa-arrow-up"></i>
          </button>
          
          <!-- Introduction Section -->
          <section id="introduction" class="mb-4">
            <div class="card border-0 bg-light mb-4">
              <div class="card-body">
                <h2 class="card-title text-primary">Terms and Conditions</h2>
                <p class="card-subtitle mb-2 text-muted">Last Updated: March 5, 2025</p>
              </div>
            </div>
            
            <div class="terms-section">
              <h3 class="terms-heading">1. Introduction</h3>
              <p>Welcome to our platform. These Terms and Conditions govern your use of our website and services. By accessing or using our platform, you agree to be bound by these Terms. If you disagree with any part of these terms, you may not access the service.</p>
            </div>
          </section>
          
          <!-- Accounts Section -->
          <section id="accounts" class="mb-4">
            <div class="terms-section">
              <h3 class="terms-heading">2. User Accounts</h3>
              
              <div class="accordion" id="accountsAccordion">
                <div class="accordion-item border-start border-primary border-3">
                  <h4 class="accordion-header" id="heading-registration">
                    <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-registration" aria-expanded="false" aria-controls="collapse-registration">
                      2.1 Registration
                    </button>
                  </h4>
                  <div id="collapse-registration" class="accordion-collapse collapse" aria-labelledby="heading-registration" data-bs-parent="#accountsAccordion">
                    <div class="accordion-body">
                      <p>To use certain features of the platform, you must register for an account. You agree to provide accurate, current, and complete information during the registration process.</p>
                    </div>
                  </div>
                </div>
                
                <div class="accordion-item border-start border-primary border-3">
                  <h4 class="accordion-header" id="heading-security">
                    <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-security" aria-expanded="false" aria-controls="collapse-security">
                      2.2 Account Security
                    </button>
                  </h4>
                  <div id="collapse-security" class="accordion-collapse collapse" aria-labelledby="heading-security" data-bs-parent="#accountsAccordion">
                    <div class="accordion-body">
                      <p>You are responsible for safeguarding your password and for all activities that occur under your account. Notify us immediately of any unauthorized use of your account.</p>
                    </div>
                  </div>
                </div>
                
                <div class="accordion-item border-start border-primary border-3">
                  <h4 class="accordion-header" id="heading-termination">
                    <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-termination" aria-expanded="false" aria-controls="collapse-termination">
                      2.3 Account Termination
                    </button>
                  </h4>
                  <div id="collapse-termination" class="accordion-collapse collapse" aria-labelledby="heading-termination" data-bs-parent="#accountsAccordion">
                    <div class="accordion-body">
                      <p>We reserve the right to suspend or terminate your account at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, or third parties.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- Content Section -->
          <section id="content" class="mb-4">
            <div class="terms-section">
              <h3 class="terms-heading">3. User Content</h3>
              
              <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                  <h4 class="m-0 fw-medium">3.1 Content Standards</h4>
                </div>
                <div class="card-body">
                  <p>Users may not post or upload content that:</p>
                  <ul class="list-group list-group-flush mb-0">
                    <li class="list-group-item bg-transparent ps-0"><i class="fas fa-times-circle text-danger me-2"></i>Is illegal, fraudulent, deceptive, or misleading</li>
                    <li class="list-group-item bg-transparent ps-0"><i class="fas fa-times-circle text-danger me-2"></i>Infringes on intellectual property rights</li>
                    <li class="list-group-item bg-transparent ps-0"><i class="fas fa-times-circle text-danger me-2"></i>Contains hate speech, harassment, or threats</li>
                    <li class="list-group-item bg-transparent ps-0"><i class="fas fa-times-circle text-danger me-2"></i>Contains sexually explicit material</li>
                    <li class="list-group-item bg-transparent ps-0"><i class="fas fa-times-circle text-danger me-2"></i>Promotes violence or discrimination</li>
                    <li class="list-group-item bg-transparent ps-0"><i class="fas fa-times-circle text-danger me-2"></i>Contains personal information of others without consent</li>
                  </ul>
                </div>
              </div>
              
              <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                  <h4 class="m-0 fw-medium">3.2 Content Moderation</h4>
                </div>
                <div class="card-body">
                  <p>All user content, including profile information and media, is subject to review. We utilize automated systems to detect inappropriate content. Content that violates our standards will be removed, and repeated violations may result in account termination.</p>
                </div>
              </div>
              
              <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light">
                  <h4 class="m-0 fw-medium">3.3 License to Content</h4>
                </div>
                <div class="card-body">
                  <p>By posting content on our platform, you grant us a non-exclusive, royalty-free license to use, modify, and display that content in connection with the services we provide.</p>
                </div>
              </div>
            </div>
          </section>
          
          <!-- Privacy & Other Sections -->
          <section id="privacy" class="mb-4">
            <div class="terms-section">
              <h3 class="terms-heading">4. Privacy</h3>
              <div class="alert alert-info">
                <i class="fas fa-shield-alt me-2"></i>
                <span>Your privacy is important to us. Please review our Privacy Policy, which explains how we collect, use, and share information about you.</span>
              </div>
              
              <h3 class="terms-heading">5. Intellectual Property</h3>
              <p>The platform, including its content, features, and functionality, is owned by us and is protected by international copyright, trademark, and other intellectual property laws.</p>
              
              <h3 class="terms-heading">6. Limitation of Liability</h3>
              <p>To the maximum extent permitted by law, we shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use or inability to use the service.</p>
              
              <h3 class="terms-heading">7. Changes to Terms</h3>
              <p>We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the new Terms on the platform and updating the "Last Updated" date.</p>
              
              <h3 class="terms-heading">8. Contact Us</h3>
              <div class="card bg-light border-0 mb-4">
                <div class="card-body">
                  <p class="mb-0">If you have any questions about these Terms, please contact us at <a href="mailto:support@yourwebsite.com" class="text-primary">support@yourwebsite.com</a>.</p>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
      
      <div class="modal-footer border-top-0 bg-light">
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-md-8">
              <p class="text-muted mb-md-0">By clicking "I Accept" you acknowledge that you have read, understood, and agree to be bound by these Terms.</p>
            </div>
            <div class="col-md-4 text-md-end">
              <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Decline</button>
              <button type="button" class="btn btn-primary px-4" id="acceptTerms" data-bs-dismiss="modal">
                <i class="fas fa-check me-1"></i> I Accept
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{# CSS styles for Enhanced Terms Modal #}
<style>
  /* Typography */
  .terms-content {
    font-size: 15px;
    line-height: 1.6;
    color: #495057;
  }
  
  .terms-heading {
    color: #2c3e50;
    font-weight: 600;
    margin-top: 1.8rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e9ecef;
  }
  
  /* Accordion Customization */
  .accordion-button:not(.collapsed) {
    background-color: rgba(63, 106, 216, 0.1);
    color: #3f6ad8;
  }
  
  .accordion-button:focus {
    box-shadow: 0 0 0 0.25rem rgba(63, 106, 216, 0.25);
  }
  
  /* Colors */
  .bg-gradient-primary {
    background: linear-gradient(135deg, #4e73df 0%, #3f6ad8 100%);
  }
  
  /* Modal Customization */
  .modal-content {
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  .modal-dialog-scrollable .modal-content {
    max-height: 85vh;
  }
  
  /* Back to Top Button */
  #backToTop:hover {
    opacity: 1 !important;
  }
  
  /* Quick Nav Buttons */
  .terms-toc .btn-outline-secondary {
    border-color: #d1d3e2;
    color: #6e707e;
  }
  
  .terms-toc .btn-outline-secondary:hover {
    background-color: #eaecf4;
    color: #3a3b45;
  }
  
  /* Print Button */
  #printTerms:hover {
    background-color: #3f6ad8;
    color: white;
  }
  
  /* Responsive Adjustments */
  @media (max-width: 767.98px) {
    .terms-toc .btn-group {
      flex-wrap: wrap;
    }
    
    .terms-toc .btn-group .btn {
      flex: 0 0 calc(50% - 4px);
      margin: 2px;
    }
  }
  
  /* Animation */
  .modal.fade .modal-dialog {
    transition: transform 0.3s ease-out;
  }
  
  .modal.show .modal-dialog {
    transform: none;
  }
</style>

{# JavaScript for Enhanced Terms Modal functionality #}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Update the terms link to open the modal
    const termsLink = document.querySelector('.m-check-label a');
    if (termsLink) {
      termsLink.setAttribute('href', '#');
      termsLink.setAttribute('data-bs-toggle', 'modal');
      termsLink.setAttribute('data-bs-target', '#termsModal');
    }
    
    // Initialize terms modal
    const termsModal = document.getElementById('termsModal');
    if (termsModal) {
      // Back to top button functionality
      const backToTopBtn = document.getElementById('backToTop');
      const modalBody = termsModal.querySelector('.modal-body');
      
      if (modalBody && backToTopBtn) {
        modalBody.addEventListener('scroll', function() {
          if (this.scrollTop > 300) {
            backToTopBtn.style.display = 'flex';
          } else {
            backToTopBtn.style.display = 'none';
          }
        });
        
        backToTopBtn.addEventListener('click', function() {
          modalBody.scrollTop = 0;
        });
      }
      
      // Navigation links
      const navButtons = termsModal.querySelectorAll('.terms-toc button[data-section]');
      navButtons.forEach(button => {
        button.addEventListener('click', function() {
          const sectionId = this.getAttribute('data-section');
          const section = document.getElementById(sectionId);
          
          if (section && modalBody) {
            modalBody.scrollTop = section.offsetTop - 20;
          }
        });
      });
      
      // Print functionality
      const printBtn = document.getElementById('printTerms');
      if (printBtn) {
        printBtn.addEventListener('click', function() {
          const printContent = document.querySelector('.terms-content').innerHTML;
          const printWindow = window.open('', '_blank');
          
          printWindow.document.write(`
            <html>
              <head>
                <title>Terms and Conditions</title>
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
                <style>
                  body { padding: 20px; font-family: Arial, sans-serif; }
                  h2 { color: #3f6ad8; }
                  h3 { margin-top: 1.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid #eee; }
                  .print-header { text-align: center; margin-bottom: 30px; }
                </style>
              </head>
              <body>
                <div class="print-header">
                  <h1>Terms and Conditions</h1>
                  <p>Last Updated: March 5, 2025</p>
                </div>
                ${printContent}
              </body>
            </html>
          `);
          
          printWindow.document.close();
          setTimeout(() => { printWindow.print(); }, 500);
        });
      }
      
      // Accept button functionality
      const acceptBtn = document.getElementById('acceptTerms');
      if (acceptBtn) {
        acceptBtn.addEventListener('click', function() {
          const agreeCheckbox = document.getElementById('m-agree');
          if (agreeCheckbox) {
            agreeCheckbox.checked = true;
            // Visual feedback
            agreeCheckbox.parentElement.classList.add('animate__animated', 'animate__flash');
            setTimeout(() => {
              agreeCheckbox.parentElement.classList.remove('animate__animated', 'animate__flash');
            }, 1000);
          }
        });
      }
      
      // If someone closes the modal without accepting, focus the checkbox
      termsModal.addEventListener('hidden.bs.modal', function() {
        const agreeCheckbox = document.getElementById('m-agree');
        if (agreeCheckbox && !agreeCheckbox.checked) {
          agreeCheckbox.focus();
        }
      });
    }
  });
</script>